<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
</head>
<body>
    <h1>User Profile</h1>

    <h2>User Data:</h2>
    {{ user_data|safe }}

    <h2>Update Profile:</h2>
    <form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}">
        {{ form.hidden_tag() }}
        {{ form.csrf_token }}
        <div>{{ form.new_username.label }}</div>
        <div>{{ form.new_username() }}</div>
        <div>{{ form.new_email.label }}</div>
        <div>{{ form.new_email() }}</div>
        <div>{{ form.submit() }}</div>
    </form>
    <!-- ... -->

<a href="{{ url_for('logout') }}" class="btn btn-danger">Logout</a>

<!-- ... -->
    <!-- ... -->

<h2>User Data:</h2>
{{ user_data|safe }}

{{ user_data.to_html()|safe }}

<!-- ... -->
 <h2>Product Quantity Chart:</h2>
    <img src="data:image/png;base64,{{ chart }}" alt="Product Quantity Chart">
    <!-- ... -->

<h2>File Upload:</h2>
<form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}" enctype="multipart/form-data">
    {{ file_upload_form.hidden_tag() }}
    {{ file_upload_form.csrf_token }}
    <div>{{ file_upload_form.photo.label }}</div>
    <div>{{ file_upload_form.photo() }}</div>
    <div>{{ file_upload_form.document.label }}</div>
    <div>{{ file_upload_form.document() }}</div>
    <div>{{ file_upload_form.submit() }}</div>
</form>

<!-- ... -->

<!-- ... -->

<h2>Uploaded Files:</h2>
{% if uploaded_photos %}
    <p>Uploaded Photos:</p>
    <img src="{{ uploaded_photos }}" alt="User Photo">
{% endif %}

{% if uploaded_documents %}
    <p>Uploaded Documents:</p>
    <a href="{{ uploaded_documents }}" download>Download Document</a>
{% endif %}

<!-- ... -->
<!-- ... -->

<h2>Uploaded Files:</h2>
{% if uploaded_photos %}
    <p>Uploaded Photos:</p>
    <img src="{{ uploaded_photos }}" alt="User Photo">
    <a href="{{ url_for('delete_photo', user_id=user.id) }}" class="btn btn-danger">Delete Photo</a>
{% endif %}

{% if uploaded_documents %}
    <p>Uploaded Documents:</p>
    <a href="{{ uploaded_documents }}" download>Download Document</a>
    <a href="{{ url_for('delete_document', user_id=user.id) }}" class="btn btn-danger">Delete Document</a>
{% endif %}

<!-- ... -->
<!-- ... -->

<h2>Sales Data Filter:</h2>
<form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
    <div>
        <label for="search">Search:</label>
        <input type="text" id="search" name="search" value="{{ search_query }}">
    </div>
    <div>
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" value="{{ start_date }}">
    </div>
    <div>
        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" value="{{ end_date }}">
    </div>
    <div>
        <button type="submit" class="btn btn-primary">Apply Filters</button>
    </div>
</form>

<h2>Sales Data:</h2>
{{ user_data|safe }}

<!-- ... -->
<!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Data:</h2>
            {{ user_data|safe }}

            <!-- ... (existing code) -->
        </div>

        <div class="col-md-4">
            <h2>Update Profile:</h2>
            <form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}">
                {{ form.hidden_tag() }}
                {{ form.csrf_token }}
                <div class="mb-3">{{ form.new_username.label }}</div>
                <div class="mb-3">{{ form.new_username() }}</div>
                <div class="mb-3">{{ form.new_email.label }}</div>
                <div class="mb-3">{{ form.new_email() }}</div>
                <div>{{ form.submit() }}</div>
            </form>

            <!-- ... (existing code) -->
        </div>
    </div>

    <!-- ... (existing code) -->

{% endblock %}
</body>
</html>
