<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
</head>
<body>
    <h1>User Profile</h1>

    <h2>User Data:</h2>
    {{ user_data|safe }}

    <h2>Update Profile:</h2>
    <form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}">
        {{ form.hidden_tag() }}
        {{ form.csrf_token }}
        <div>{{ form.new_username.label }}</div>
        <div>{{ form.new_username() }}</div>
        <div>{{ form.new_email.label }}</div>
        <div>{{ form.new_email() }}</div>
        <div>{{ form.submit() }}</div>
    </form>
    <!-- ... -->

<a href="{{ url_for('logout') }}" class="btn btn-danger">Logout</a>

<!-- ... -->
    <!-- ... -->

<h2>User Data:</h2>
{{ user_data|safe }}

{{ user_data.to_html()|safe }}

<!-- ... -->
 <h2>Product Quantity Chart:</h2>
    <img src="data:image/png;base64,{{ chart }}" alt="Product Quantity Chart">
    <!-- ... -->

<h2>File Upload:</h2>
<form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}" enctype="multipart/form-data">
    {{ file_upload_form.hidden_tag() }}
    {{ file_upload_form.csrf_token }}
    <div>{{ file_upload_form.photo.label }}</div>
    <div>{{ file_upload_form.photo() }}</div>
    <div>{{ file_upload_form.document.label }}</div>
    <div>{{ file_upload_form.document() }}</div>
    <div>{{ file_upload_form.submit() }}</div>
</form>

<!-- ... -->

<!-- ... -->

<h2>Uploaded Files:</h2>
{% if uploaded_photos %}
    <p>Uploaded Photos:</p>
    <img src="{{ uploaded_photos }}" alt="User Photo">
{% endif %}

{% if uploaded_documents %}
    <p>Uploaded Documents:</p>
    <a href="{{ uploaded_documents }}" download>Download Document</a>
{% endif %}

<!-- ... -->
<!-- ... -->

<h2>Uploaded Files:</h2>
{% if uploaded_photos %}
    <p>Uploaded Photos:</p>
    <img src="{{ uploaded_photos }}" alt="User Photo">
    <a href="{{ url_for('delete_photo', user_id=user.id) }}" class="btn btn-danger">Delete Photo</a>
{% endif %}

{% if uploaded_documents %}
    <p>Uploaded Documents:</p>
    <a href="{{ uploaded_documents }}" download>Download Document</a>
    <a href="{{ url_for('delete_document', user_id=user.id) }}" class="btn btn-danger">Delete Document</a>
{% endif %}

<!-- ... -->
<!-- ... -->

<h2>Sales Data Filter:</h2>
<form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
    <div>
        <label for="search">Search:</label>
        <input type="text" id="search" name="search" value="{{ search_query }}">
    </div>
    <div>
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date" value="{{ start_date }}">
    </div>
    <div>
        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date" value="{{ end_date }}">
    </div>
    <div>
        <button type="submit" class="btn btn-primary">Apply Filters</button>
    </div>
</form>

<h2>Sales Data:</h2>
{{ user_data|safe }}

<!-- ... -->
<!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Data:</h2>
            {{ user_data|safe }}

            <!-- ... (existing code) -->
        </div>

        <div class="col-md-4">
            <h2>Update Profile:</h2>
            <form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}">
                {{ form.hidden_tag() }}
                {{ form.csrf_token }}
                <div class="mb-3">{{ form.new_username.label }}</div>
                <div class="mb-3">{{ form.new_username() }}</div>
                <div class="mb-3">{{ form.new_email.label }}</div>
                <div class="mb-3">{{ form.new_email() }}</div>
                <div>{{ form.submit() }}</div>
            </form>

            <!-- ... (existing code) -->
        </div>
    </div>

    <!-- ... (existing code) -->

{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <p><strong>Username:</strong> {{ user.username }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Member Since:</strong> {{ user.join_date.strftime('%B %d, %Y') }}</p>

            <h2>Sales Data:</h2>
            {{ user_data|safe }}

            <!-- ... (existing code) -->
        </div>

        <div class="col-md-4">
            <h2>Update Profile:</h2>
            <form method="POST" action="{{ url_for('user_profile', user_id=user.id) }}">
                {{ form.hidden_tag() }}
                {{ form.csrf_token }}
                <div class="mb-3">{{ form.new_username.label }}</div>
                <div class="mb-3">{{ form.new_username(class="form-control") }}</div>
                <div class="mb-3">{{ form.new_email.label }}</div>
                <div class="mb-3">{{ form.new_email(class="form-control") }}</div>
                <div>{{ form.submit(class="btn btn-primary") }}</div>
            </form>

            <h2>Update Password:</h2>
            <form method="POST" action="{{ url_for('update_password', user_id=user.id) }}">
                {{ password_form.hidden_tag() }}
                {{ password_form.csrf_token }}
                <div class="mb-3">{{ password_form.old_password.label }}</div>
                <div class="mb-3">{{ password_form.old_password(class="form-control") }}</div>
                <div class="mb-3">{{ password_form.new_password.label }}</div>
                <div class="mb-3">{{ password_form.new_password(class="form-control") }}</div>
                <div class="mb-3">{{ password_form.confirm_password.label }}</div>
                <div class="mb-3">{{ password_form.confirm_password(class="form-control") }}</div>
                <div>{{ password_form.submit(class="btn btn-primary") }}</div>
            </form>

            <!-- ... (existing code) -->
        </div>
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <p><strong>Username:</strong> {{ user.username }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Member Since:</strong> {{ user.join_date.strftime('%B %d, %Y') }}</p>

            <h2>Sales Data:</h2>
            {{ user_data|safe }}

            <!-- ... (existing code) -->
        </div>

        <div class="col-md-4">
            <h2>Update Profile:</h2>
            <!-- ... (existing code) -->

            <h2>Update Password:</h2>
            <!-- ... (existing code) -->

            <h2>Delete Account:</h2>
            <p>Are you sure you want to delete your account?</p>
            <form method="POST" action="{{ url_for('delete_account', user_id=user.id) }}">
                {{ delete_account_form.hidden_tag() }}
                {{ delete_account_form.csrf_token }}
                <div class="mb-3">{{ delete_account_form.confirm_delete.label }}</div>
                <div class="mb-3">{{ delete_account_form.confirm_delete(class="form-control") }}</div>
                <div>{{ delete_account_form.submit(class="btn btn-danger") }}</div>
            </form>

            <!-- ... (existing code) -->
        </div>
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <p><strong>Username:</strong> {{ user.username }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Member Since:</strong> {{ user.join_date.strftime('%B %d, %Y') }}</p>

            <h2>Sales Data:</h2>
            {% for page in user_data.pages %}
                {% if user_data.page == page %}
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in user_data.items %}
                                    <tr>
                                        <td>{{ row.date }}</td>
                                        <td>{{ row.product }}</td>
                                        <td>{{ row.amount }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            {% endfor %}

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <!-- ... (existing code) -->

            <h2>Sales Data:</h2>
            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Search for product or date" name="search" value="{{ search_query }}">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>

            {% for page in user_data.pages %}
                {% if user_data.page == page %}
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in user_data.items %}
                                    <tr>
                                        <td>{{ row.date }}</td>
                                        <td>{{ row.product }}</td>
                                        <td>{{ row.amount }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            {% endfor %}

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <!-- ... (existing code) -->

            <h2>Sales Data:</h2>
            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Search for product or date" name="search" value="{{ search_query }}">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>

            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <label for="start_date" class="col-form-label">Start Date:</label>
                    <input type="date" class="form-control" id="start_date" name="start_date" value="{{ start_date }}">
                    <label for="end_date" class="col-form-label">End Date:</label>
                    <input type="date" class="form-control" id="end_date" name="end_date" value="{{ end_date }}">
                    <button class="btn btn-primary" type="submit">Filter</button>
                </div>
            </form>

            {% for page in user_data.pages %}
                {% if user_data.page == page %}
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in user_data.items %}
                                    <tr>
                                        <td>{{ row.date }}</td>
                                        <td>{{ row.product }}</td>
                                        <td>{{ row.amount }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            {% endfor %}

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <!-- ... (existing code) -->

            <h2>Sales Data:</h2>
            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Search for product or date" name="search" value="{{ search_query }}">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>

            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <label for="start_date" class="col-form-label">Start Date:</label>
                    <input type="date" class="form-control" id="start_date" name="start_date" value="{{ start_date }}">
                    <label for="end_date" class="col-form-label">End Date:</label>
                    <input type="date" class="form-control" id="end_date" name="end_date" value="{{ end_date }}">
                    <button class="btn btn-primary" type="submit">Filter</button>
                </div>
            </form>

            {% for page in user_data.pages %}
                {% if user_data.page == page %}
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in user_data.items %}
                                    <tr>
                                        <td>{{ row.date|date("Y-m-d") }}</td>
                                        <td>{{ row.product }}</td>
                                        <td>{{ row.amount }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            {% endfor %}

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <!-- ... (existing code) -->

            <h2>Sales Data:</h2>
            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Search for product or date" name="search" value="{{ search_query }}">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>

            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <label for="start_date" class="col-form-label">Start Date:</label>
                    <input type="date" class="form-control" id="start_date" name="start_date" value="{{ start_date }}">
                    <label for="end_date" class="col-form-label">End Date:</label>
                    <input type="date" class="form-control" id="end_date" name="end_date" value="{{ end_date }}">
                    <button class="btn btn-primary" type="submit">Filter</button>
                </div>
            </form>

            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in user_data.items %}
                            <tr>
                                <td>{{ row.date|date("Y-m-d") }}</td>
                                <td>{{ row.product }}</td>
                                <td>{{ row.amount }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <form method="POST" action="{{ url_for('export_excel', user_id=user.id) }}">
                <button class="btn btn-success mt-3" type="submit">Export to Excel</button>
            </form>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <!-- ... (existing code) -->

            <h2>Sales Data:</h2>
            <!-- ... (existing code) -->

            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in user_data.items %}
                            <tr>
                                <td>{{ row.date|date("Y-m-d") }}</td>
                                <td>{{ row.product }}</td>
                                <td>{{ row.amount }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <form method="POST" action="{{ url_for('export_excel', user_id=user.id) }}">
                <button class="btn btn-success mt-3" type="submit">Export to Excel</button>
            </form>

            <a class="btn btn-info mt-3" href="{{ url_for('sales_chart', user_id=user.id) }}" role="button">View Sales Chart</a>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

    <!-- templates/user_profile.html -->

{% extends 'base.html' %}

{% block content %}
    <h1 class="mt-4">User Profile</h1>

    <div class="row">
        <div class="col-md-8">
            <h2>User Information:</h2>
            <!-- ... (existing code) -->

            <h2>Sales Data:</h2>
            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Search for product or date" name="search" value="{{ search_query }}">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>

            <form method="GET" action="{{ url_for('user_profile', user_id=user.id) }}">
                <div class="input-group mb-3">
                    <label for="start_date" class="col-form-label">Start Date:</label>
                    <input type="date" class="form-control" id="start_date" name="start_date" value="{{ start_date }}">
                    <label for="end_date" class="col-form-label">End Date:</label>
                    <input type="date" class="form-control" id="end_date" name="end_date" value="{{ end_date }}">
                    <button class="btn btn-primary" type="submit">Filter</button>
                </div>
            </form>

            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in user_data.items %}
                            <tr>
                                <td>{{ row.date|date("Y-m-d") }}</td>
                                <td>{{ row.product }}</td>
                                <td>{{ row.amount }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="pagination">
                {{ user_data.prev() }}
                Page {{ user_data.page }} of {{ user_data.pages }}
                {{ user_data.next() }}
            </div>

            <form method="POST" action="{{ url_for('export_excel', user_id=user.id) }}">
                <button class="btn btn-success mt-3" type="submit">Export to Excel</button>
            </form>

            <a class="btn btn-info mt-3" href="{{ url_for('sales_chart', user_id=user.id) }}" role="button">View Sales Chart</a>

            <a class="btn btn-warning mt-3" href="{{ url_for('upload_history', user_id=user.id) }}" role="button">Upload History</a>

            <a class="btn btn-primary mt-3" href="{{ url_for('sales_summary', user_id=user.id) }}" role="button">Sales Summary</a>

            <a class="btn btn-secondary mt-3" href="{{ url_for('filtered_sales', user_id=user.id) }}" role="button">Filtered Sales</a>

            <!-- ... (existing code) -->
        </div>

        <!-- ... (existing code) -->
    </div>

    <!-- ... (existing code) -->
{% endblock %}

</body>
</html>
